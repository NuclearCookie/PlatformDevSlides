<html>
    <head>
        <link rel="stylesheet" href="../reveal.js/css/reveal.css">
        <link rel="stylesheet" href="../reveal.js/lib/css/zenburn.css">
        <link rel="stylesheet" href="../reveal.js/css/theme/solarized.css">
        <link rel="stylesheet" href="../styles.css">
    </head>
    <body>
        <div class="reveal">
            <div class="slides">
                <section data-markdown>
                    <script type="text/template">
                        # Platform development

                        A course about low level programming and targetting different architectures.
                    </script>
                </section>
                <section data-markdown="intro.md"
                         data-separator="^\n\n\n"
                         data-separator-vertical="^\n\n"
                         data-separator-notes="^Note:">

                </section>
                <section data-markdown>
                    <script type="text/template">
                        # Computer architecture
                    </script>
                </section>
                <section data-markdown="computer_architecture.md"
                         data-separator="^\n\n\n"
                         data-separator-vertical="^\n\n"
                         data-separator-notes="^Note:">

                </section>
                <section data-markdown>
                    <script type="text/template">
                        # Binary representation
                    </script>
                </section>
                <section data-markdown="converting_base.md"
                         data-separator="^\n\n\n"
                         data-separator-vertical="^\n\n"
                         data-separator-notes="^Note:">

                </section>
                <!-- memory representation -->
                <section data-markdown>
                    <script type="text/template">
                        # Signed vs Unsigned

                        _using 8bit integers (chars) to simplify_
                    </script>
                </section>
                <section data-markdown>
                    <script type="text/template">
                        ### signed char:

                        | decimal | binary |
                        | --- | --- |
                        | 0 | 0 |
                        | 1 | 1 |
                        | 2 | 10 |
                        | ... | ... |
                        | 127 | 0111 1111 |
                        | 255 | 1111 1111 |

                        What about negative values?
                    </script>
                </section>
                <section data-markdown>
                    <script type="text/template">
                        We are already using all possible values in the 8 bit range..

                        Solution:

                        change range from [0;255] to [-128;127]

                        How do we represent this?
                    </script>
                </section>
                <section data-markdown>
                    <script type="text/template">
                        We could go for adding a sign bit:

                        | decimal | binary |
                        | --- | --- |
                        | 0 | 0 |
                        | 1 | <span style='color:red'>0</span>000 0001 |
                        | -1 | <span style='color:red'>1</span>000 0001 |
                        | 2 | <span style='color:red'>0</span>000 0010 |
                        | -2 | <span style='color:red'>1</span>000 0010 |
                        | ... | ... |
                        | 127 | <span style='color:red'>0</span>111 1111 |
                        | -127 | <span style='color:red'>1</span>111 1111 |
                    </script>
                </section>
                <section data-markdown>
                    <script type="text/template">
                        ### Let's see if this is ok...

                        * Problem 1: we have 1 value that is not used: 1000 0000
                        ( negative 0 ??)
                        * Problem 2: Let's look at operations.
                    </script>
                </section>
                <section data-markdown>
                    <script type="text/template">
                        105 + 77 = 182

                        | | 0110 1001 |
                        | --- | ---: |
                        |+| 0100 1101 |
                        | | 1011 0110 |

                        105 - 77 = 28

                        | | 0110 1001 |
                        | --- | ---: |
                        |-| 0100 1101 |
                        | | 0001 1100 |
                    </script>
                </section>
                <section data-markdown>
                    <script type="text/template">
                        A computer needs to implement the hardware for math operations.
                        How can we rewrite a subtraction so that it uses the same system as addition?

                        a - b == a + ( -b )
                        <!-- .element: class="fragment" -->

                        **right?**
                        <!-- .element: class="fragment" -->
                    </script>
                </section>
                <section data-markdown>
                    <script type="text/template">
                        105 - 77 = 28

                        | | 0110 1001 |
                        | --- | ---: |
                        |-| 0100 1101 |
                        | | 0001 1100 |

                        105 + -77 = 28

                        | |  0110 1001 |
                        | --- | ---: |
                        |+|  1100 1101 |
                        | | 10011 0110 |

                        wait, 105 + -77 = 310 !?
                    </script>
                </section>
                <section data-markdown>
                    <script type="text/template">
                        ## Complementary numbers.
                        What is a complementary number?

                        A complementary number is the number obtained by subtracting a number from its base.

                        For example:

                        The nine's complement of 23 is 76 because 23 + 76 = 99, which is the nine's base of 23.

                        Knowing this, we can rewrite our subtraction:
                        ```
                        105 -77
                        105 -77 + 100 - 100
                        105 -77 + 99 + 1 - 100
                        105 + (99 - 77) + 1 - 100
                        ```
                    </script>
                </section>
                <section data-markdown>
                    <script type="text/template">
                        105 + (99 - 77) + 1 - 100

                        | | 105 |
                        | --- | ---: |
                        |-| 77 |
                        | | 28 |

                        ==

                        | | 105 |
                        | --- | ---: |
                        |+| 22 |
                        |+| 1 |
                        |-| 100 |
                        | | 28 |
                    </script>
                </section>
                <section data-markdown class="smaller_text">
                    <script type="text/template">
                        What is the one's complement of a binary number?


                        | | 0110 1001 |
                        | --- | ---: |
                        |-| 0100 1101 |
                        | | 0001 1100 |

                        The inverse! `0000 0001 + 1111 1110 = 1111 1111`

                        | |   0110 1001 |
                        | --- | ---: |
                        |+|   1011 0010 |
                        |+|   0000 0001 |
                        |-| 1 0000 0000 |
                        | | 0 0001 1100 |

                        Now also note that the - 1 0000 0000 is not really necessary because we only have 8 bits memory available.
                    </script>
                </section>
                <section data-markdown>
                    <script type="text/template">
                        We have just rewritten a negative value as its one's complement + 1.

                        **This is called the two's complement.**

                        0000 0001 + 1111 1111 = 1 0000 0000
                    </script>
                </section>
                <section data-markdown class="smaller_text">
                    <script type="text/template">
                        ### Unsigned char

                        We have now a very good binary representation of negative and positive whole numbers.

                        | decimal | binary |
                        | --- | --- |
                        | 127 | 0111 1111 |
                        | 2 | 0000 0010 |
                        | 1 | 0000 0001 |
                        | 0 | 0 |
                        | -1 | 1111 1111 |
                        | -2 | 1111 1110 |
                        | -128 | 1000 0000 |

                        As you can see:
                        * We still have the signing bit
                        * We use all binary combinations [-128;127]
                        * We can easily perform arithmatic operations on positive and negative values
                    </script>
                </section>
                <section data-markdown>
                    <script type="text/template">
                        We can verify this implementation when we overflow.
                        ```cpp
                        #include <cstdio>

                        int main()
                        {
                          char will_overflow = 127;
                          will_overflow++;
                          printf("%i", will_overflow);
                        }
                        ```
                        will output: -128.

                        ```cpp
                        #include <cstdio>

                        int main()
                        {
                          unsigned char will_not_overflow = 127;
                          unsigned char will_overflow = 255;
                          will_not_overflow++;
                          will_overflow++;
                          printf("127 became %i, while 255 became %i", will_not_overflow, will_overflow);
                        }
                        ```
                        will output: 127 became 128, while 255 became 0
                    </script>
                </section>
                <section data-markdown>
                    <script type="text/template">
                        ## How can we easily change the sign of a number through bit manipulation?

                        | decimal | binary |
                        | --- | --- |
                        | 1 | 0000 0001 |
                        | -1 | 1111 1111 |
                        | 2 | 0000 0010 |
                        | -2 | 1111 1110 |
                        | 127 | 0111 1111 |
                        | -127 | 1000 0001 |

                        Do you see a correlation?
                    </script>
                </section>
                <section data-markdown>
                    <script type="text/template">
                        ### To change the sign of a signed integer we invert the values and add 1.

                        !0000 0001 = 1111 1110<br/>
                        1111 1110 + 1 = 1111 1111

                        and back:

                        !1111 1111 = 0000 0000<br/>
                        0000 0000 + 1 = 0000 0001
                    </script>
                </section>
                <section data-markdown>
                    <script type="text/template">
                        ### This is called the Two's complement
                    </script>
                </section>
                <section data-markdown class="smaller_text">
                    <script type="text/template">
                        ## Bitwise operators

                        | Operator | Symbol | Form | Operation |
                        | -------- | :------: | ----: | --------- |
                        | left shift | << | x << y | all bits in x shifted left y bits |
                        | right shift | >> | x >> y | all bits in x shifted right y bits |
                        | bitwise NOT | ~ | ~x | all bits in x flipped |
                        | bitwise AND | & | x & y | each bit in x AND each bit in y |
                        | bitwise OR | &#124; | x &#124; y | each bit in x OR each bit in y |
                        | bitwise XOR | ^ | x ^ y | each bit in x XOR each bit in y |
                    </script>
                </section>
                <section data-markdown>
                    <script type="text/template">
                        ## Left Shift

                        ```
                        0010 1111 << 1 == 0101 1110
                        0010 1111 << 4 == 1111 0000
                        0010 1111 << 8 == 0000 0000
                        ```
                    </script>
                </section>
                <section data-markdown>
                    <script type="text/template">
                        ## Right Shift

                        ```
                        0010 1111 >> 1 == 0001 0111
                        0010 1111 >> 4 == 0000 0010
                        0010 1111 >> 8 == 0000 0000
                        ```

                        **Careful:**
                        ```cpp
                        //signed right shift:
                        1000 0010 >> 1 == 1100 0001
                        0100 0010 >> 1 == 0010 0001
                        //or unsigned right shift:
                        1000 0010 >> 1 == 0100 0001
                        0100 0010 >> 1 == 0010 0001
                        ```
                        Note that the standard does not specify this behavior.
                    </script>
                </section>
                <section data-markdown>
                    <script type="text/template">
                        ## Bitwise NOT

                        ```
                        ~0010 1111 == 1101 0000
                        ~1111 1111 == 0000 0000
                        ~0000 0000 == 1111 1111
                        ```
                    </script>
                </section>
                <section data-markdown>
                    <script type="text/template">
                        ## Bitwise AND

                        ```
                        0010 1111 & 1111 1111 == 0010 1111
                        0010 1111 & 0000 0000 == 0000 0000
                        0010 1111 & 1001 0110 == 0000 0110
                        ```
                    </script>
                </section>
                <section data-markdown>
                    <script type="text/template">
                        ## Bitwise OR

                        ```
                        0010 1111 | 1111 1111 == 1111 1111
                        0010 1111 | 0000 0000 == 0010 1111
                        0010 1111 | 1001 0110 == 1011 1111
                        ```
                    </script>
                </section>
                <section data-markdown>
                    <script type="text/template">
                        ## Bitwise XOR

                        ```
                        0010 1111 ^ 1111 1111 == 1101 0000
                        0010 1111 ^ 0000 0000 == 0010 1111
                        0010 1111 ^ 1001 0110 == 1011 1001
                        ```
                    </script>
                </section>
                <section data-markdown>
                    <script type="text/template">

                    </script>
                </section>
                <!-- empty Slide
                <section data-markdown>
                    <script type="text/template">
                    </script>
                </section>
                -->
            </div>
        </div>
        <script src="../reveal.js/lib/js/head.min.js"></script>
        <script src="../reveal.js/js/reveal.js"></script>
		<script>
            Reveal.initialize({
                dependencies: [
                    // Cross-browser shim that fully implements classList - https://github.com/eligrey/classList.js/
                    { src: '../reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },

                    // Interpret Markdown in <section> elements
                    { src: '../reveal.js/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: '../reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },

                    // Syntax highlight for <code> elements
                    { src: '../reveal.js/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },

                    // Zoom in and out with Alt+click
                    { src: '../reveal.js/plugin/zoom-js/zoom.js', async: true },

                    // Speaker notes
                    { src: '../reveal.js/plugin/notes/notes.js', async: true },
                ]
            });
        </script>
    </body>
</html>
